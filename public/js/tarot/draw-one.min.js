document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("tarot-data");if(!r)return;let t=JSON.parse(r.textContent);typeof t=="string"&&(t=JSON.parse(t));const i=document.getElementById("draw-card");if(!i)return;const e=document.getElementById("tarot-overlay"),a=document.querySelector(".tarot-panel"),s=document.getElementById("tarot-result"),n=document.querySelector(".tarot-card"),o=document.getElementById("tarot-image"),c=document.getElementById("tarot-name"),l=document.getElementById("tarot-summary"),d=document.getElementById("tarot-emotion"),u=document.getElementById("tarot-guidance"),h=document.getElementById("tarot-link");i.addEventListener("click",()=>{e&&(e.hidden=!1),n&&n.classList.remove("is-flipped"),s&&(s.hidden=!0),setTimeout(()=>{const i=t[Math.floor(Math.random()*t.length)];if(!i){e&&(e.hidden=!0);return}o&&i.image&&(o.src=i.image,o.alt=i.title||""),c&&(c.textContent=i.title||""),l&&(l.textContent=i.summary||""),d&&(d.textContent=i.emotion||""),u&&(u.textContent=i.guidance||""),h&&i.url&&(h.href=i.url),document.body.classList.remove("tarot-before"),document.body.classList.add("tarot-after"),a&&a.classList.add("is-active"),s&&(s.hidden=!1),n&&setTimeout(()=>{n.classList.add("is-flipped")},100),e&&(e.hidden=!0)},1600)})})